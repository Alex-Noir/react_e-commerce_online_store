{"version":3,"sources":["components/container/SearchResult.js","components/container/SearchResults.js"],"names":["SearchResult","props","productCategory","result","id","title","category","price","hasDiscount","discount","isInCart","amountInCart","rating","useState","customRating","setCustomRating","setTempRating","prevCount","value","ref","useRef","useEffect","current","usePrevious","inputValue","setInputValue","isInfoVisible","setIsInfoVisible","useTranslation","t","currencyRate","handleMouseover","rate","handleMouseout","counter","e","target","name","currency","fetchedRates","USD","RUB","CNY","JPY","KRW","INR","to","className","src","require","alt","width","heigth","StarRating","type","onClick","size","readOnly","addToCart","setTimeout","showInfo","evaluateTotalPrice","parseFloat","toFixed","SearchResults","window","scrollTo","makeResultsInvisible","nullifySearchValue","results","map","key"],"mappings":"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","file":"static/js/15.fba738af.chunk.js","sourcesContent":["import React, { useState, useEffect, useRef } from 'react'\r\nimport { Link } from 'react-router-dom'\r\nimport { useTranslation } from 'react-i18next'\r\nimport { ContextConsumer } from '../../context'\r\nimport { DivInfo } from '../styles'\r\n\r\nimport StarRating from './products/productPage/StarRating'\r\n\r\nexport default function SearchResult(props) {\r\n  const { id, \r\n          title, \r\n          category,\r\n          price, \r\n          hasDiscount,\r\n          discount,\r\n          isInCart, \r\n          amountInCart, \r\n          rating } = props.result\r\n\r\n  const [ customRating, setCustomRating ] = useState(rating || null)\r\n  const [ tempRating, setTempRating ] = useState(null)\r\n  const prevCount = usePrevious(customRating)\r\n  const [ inputValue, setInputValue ] = useState(0)\r\n  const [ isInfoVisible, setIsInfoVisible] = useState(false)\r\n\r\n  const [ t ] = useTranslation()\r\n\r\n  let currencyRate = 1\r\n\r\n  if (props.value.currency === '$') {\r\n    currencyRate = props.value.fetchedRates.USD\r\n  } else if (props.value.currency === '₽') {\r\n    currencyRate = props.value.fetchedRates.RUB\r\n  } else if (props.value.currency === 'Ch¥') {\r\n    currencyRate = props.value.fetchedRates.CNY\r\n  } else if (props.value.currency === 'Jp¥') {\r\n    currencyRate = props.value.fetchedRates.JPY\r\n  } else if (props.value.currency === '₩') {\r\n    currencyRate = props.value.fetchedRates.KRW\r\n  } else if (props.value.currency === '₹') {\r\n    currencyRate = props.value.fetchedRates.INR\r\n  }\r\n\r\n  let productCategory\r\n\r\n  if (category === 'Mobile Phones') {\r\n    productCategory = <Link to=\"/mobile-phones\">{t('Nav|1')}</Link>\r\n  } else if (category === 'Laptops') {\r\n    productCategory = <Link to=\"/laptops\">{t('Nav|2')}</Link>\r\n  } else if (category === 'Tablets') {\r\n    productCategory = <Link to=\"/tablets\">{t('Nav|3')}</Link>\r\n  } \r\n  \r\n  function handleMouseover(rating) {\r\n    setCustomRating(rating)\r\n    setTempRating(prevCount)\r\n  }\r\n\r\n  function rate(rating) {\r\n    setCustomRating(rating)\r\n    setTempRating(rating)\r\n  }\r\n\r\n  function handleMouseout() {\r\n    setCustomRating(prevCount)\r\n  }\r\n\r\n  function usePrevious(value) {\r\n    const ref = useRef()\r\n    \r\n    useEffect(() => {\r\n      ref.current = value\r\n    }, [value])    \r\n\r\n    return ref.current\r\n  }\r\n\r\n  function counter(e) {\r\n    if (e.target.name === \"-\" && inputValue > 0) {\r\n      setIsInfoVisible(false)\r\n      setInputValue(inputValue - 1)\r\n    } else if (e.target.name === \"-\" && inputValue <= 0) {\r\n      return null\r\n    } else if (e.target.name === \"+\") {\r\n      setIsInfoVisible(false)\r\n      setInputValue(inputValue + 1)\r\n    }\r\n  }\r\n\r\n  function showInfo(inputValue) {\r\n    if (inputValue >= 1) {\r\n      setIsInfoVisible(true)\r\n      setTimeout(() => setIsInfoVisible(false), 3000)\r\n    } else { return null }\r\n  }\r\n\r\n  return (\r\n    <ContextConsumer>\r\n      {\r\n        value => (\r\n          <div className=\"rounded bg-light border border-danger m-1 p-3\">\r\n            <img\r\n              src={require(`../../img/products/data/${id}/01.webp`)} \r\n              alt=\"SearchItem\"\r\n              width=\"121\"\r\n              heigth=\"121\"\r\n            />\r\n            <div className=\"d-flex flex-column\">\r\n              <Link to={`/product-page/${id}`} className=\"text-dark\"><h4>{title}</h4></Link>\r\n              <h6 className=\"text-primary\">{productCategory}</h6>\r\n              <div className=\"d-flex\">\r\n                <StarRating rating={rating}\r\n                            customRating={customRating}\r\n                            handleMouseover={handleMouseover}\r\n                            rate={rate}\r\n                            handleMouseout={handleMouseout} />\r\n                <span className=\"ml-2\">({rating})</span>\r\n              </div>\r\n            </div>\r\n            <div className=\"d-flex flex-column\">\r\n              <div className=\"d-flex no-wrap align-items-start mb-1\">\r\n                <button className=\"btn btn-outline-dark border-right-0 rounded-0\"\r\n                        type=\"button\" \r\n                        value=\"-\" \r\n                        name=\"-\" \r\n                        onClick={counter}> - </button>\r\n                <input  className=\"btn btn-outline-dark border-left-0 border-right-0 rounded-0\"\r\n                        type=\"text\" \r\n                        value={inputValue} \r\n                        size=\"1\" \r\n                        readOnly />\r\n                <button className=\"btn btn-outline-dark border-left-0 rounded-0\" \r\n                        type=\"button\" \r\n                        value=\"+\" \r\n                        name=\"+\" \r\n                        onClick={counter}> + </button>\r\n              </div>\r\n              <button type=\"button\"\r\n                      className=\"btn btn-warning\"\r\n                      onClick={() => {  value.addToCart(id, inputValue, hasDiscount)\r\n                                        showInfo(inputValue)\r\n                                        value.evaluateTotalPrice()  }}>{t('AddToCart|2')}</button>\r\n              <DivInfo className={isInfoVisible ? \"visible\" : \"invisible\"}> \r\n                +{inputValue} {t('AddToCart|3')}\r\n              </DivInfo>\r\n            </div>\r\n            <div className=\"d-flex flex-column align-items-end\">\r\n              <h3>\r\n                {\r\n                  !hasDiscount\r\n                  ? <span>{value.currency} {parseFloat((price * currencyRate).toFixed(2))}</span>\r\n                  : <>\r\n                      <span className=\"d-flex flex-column\">\r\n                        <s className=\"d-flex no-wrap\">\r\n                          <span>{value.currency}</span> \r\n                          <span>{parseFloat((price * currencyRate).toFixed(2))}</span>\r\n                        </s>                     \r\n                        <span className=\"d-flex no-wrap text-danger\">\r\n                          <span>{value.currency}</span> \r\n                          <span>{parseFloat(((price * currencyRate) * discount).toFixed(2))}</span>\r\n                        </span>\r\n                      </span>\r\n                    </>\r\n                }                \r\n              </h3>\r\n              <h6 className={isInCart ? \"bg-danger text-white p-1 rounded\" : null}>\r\n                {t('SearchResult|1')} {amountInCart}\r\n              </h6>\r\n            </div>\r\n          </div>\r\n        )\r\n      }\r\n    </ContextConsumer>\r\n  )\r\n}\r\n","import React, { useEffect } from 'react'\r\nimport { ContextConsumer } from '../../context'\r\nimport { DivSearchResults } from '../styles'\r\n\r\nimport SearchResult from './SearchResult'\r\n\r\nexport default function SearchResults(props) {\r\n  useEffect(() => {\r\n    window.scrollTo(0, 0)\r\n    \r\n    return () => {\r\n      props.value.makeResultsInvisible()\r\n      props.value.nullifySearchValue()\r\n    }\r\n  }, [])\r\n\r\n  return (\r\n    <DivSearchResults className=\"d-flex flex-column\">\r\n      <ContextConsumer>\r\n        {\r\n          value => {\r\n            return value.results.map(result => {\r\n              return <SearchResult key={result.id} result={result} value={value} />\r\n            })\r\n          }\r\n        }\r\n      </ContextConsumer>\r\n    </DivSearchResults>\r\n  )\r\n}\r\n"],"sourceRoot":""}